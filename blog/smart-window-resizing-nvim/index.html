<!doctype html>
<!-- vim: set ft=tera: -->
<html lang="en">
  <head>
    
  
      <meta charset="utf-8" />
      <link rel="stylesheet" href="/main.css" />
      <meta name="viewport" content="width=device-width,initial-scale=1.0">
    
  <link rel="stylesheet" href="/blog/post.css" />

    
  <title>Smart Window Resizing in Neovim</title>

    
      <link rel="alternate" type="application/rss+xml" title="RSS" href="https://brennenputh.me/rss.xml">
    
  </head>

  <body>
    <div class="header" style="display: flex; flex-direction: row; gap: 5px">
      <h4>Brennen Puth</h4>
      <a href="/">Home</a>
      <a href="https://brennenputh.me/projects/">Projects</a>
    </div>
    <main>
      <div class="container">
<h1 class="title">
  Smart Window Resizing in Neovim
</h1>
<p class="subtitle">2025-04-12</p>
<p>The last day or two, I've been refitting my Neovim windowing config.
Nothing too wild, just fixing a few warts here and there.
What follows is a few different snippets for different behaviors I wanted.
Hopefully one of these is useful to someone, even if only as a reference (something <em>definitely</em> needs said about the Neovim documentation searchability situation).
If you want to see these in their context, links will be left below each example.
The links may fall out of date, so I've linked them to the specific commit.</p>
<p>Also, if you're interested in this, I credit <a href="https://github.com/chrisgrieser">chrisgrieser</a> who used to run a blog called Nano Tips For Vim, which was immensely helpful to me in figuring out all of my Neovim configs but was sadly taken offline as of 2025-06-12.</p>
<h2 id="turn-off-line-numbers-for-small-windows">Turn Off Line Numbers for Small Windows</h2>
<pre data-linenos data-lang="lua" style="background-color:#2b303b;color:#c0c5ce;" class="language-lua "><code class="language-lua" data-lang="lua"><table><tbody><tr><td>1</td><td><span style="color:#b48ead;">local </span><span style="color:#8fa1b3;">set_numbers </span><span>= </span><span style="color:#b48ead;">function</span><span>(value, window)
</span></td></tr><tr><td>2</td><td><span>	</span><span style="color:#bf616a;">vim</span><span>.api.</span><span style="color:#bf616a;">nvim_set_option_value</span><span>(&quot;</span><span style="color:#a3be8c;">number</span><span>&quot;, </span><span style="color:#bf616a;">value</span><span>, { </span><span style="color:#a3be8c;">win </span><span>= </span><span style="color:#bf616a;">window </span><span>})
</span></td></tr><tr><td>3</td><td><span>	</span><span style="color:#bf616a;">vim</span><span>.api.</span><span style="color:#bf616a;">nvim_set_option_value</span><span>(&quot;</span><span style="color:#a3be8c;">relativenumber</span><span>&quot;, </span><span style="color:#bf616a;">value</span><span>, { </span><span style="color:#a3be8c;">win </span><span>= </span><span style="color:#bf616a;">window </span><span>})
</span></td></tr><tr><td>4</td><td><span style="color:#b48ead;">end
</span></td></tr><tr><td>5</td><td><span style="color:#b48ead;">local </span><span style="color:#bf616a;">window_size_threshold </span><span>= </span><span style="color:#d08770;">40
</span></td></tr><tr><td>6</td><td><span>
</span></td></tr><tr><td>7</td><td><span style="color:#bf616a;">vim</span><span>.api.</span><span style="color:#bf616a;">nvim_create_autocmd</span><span>(&quot;</span><span style="color:#a3be8c;">WinResized</span><span>&quot;, {
</span></td></tr><tr><td>8</td><td><span>	</span><span style="color:#8fa1b3;">callback </span><span>= </span><span style="color:#b48ead;">function</span><span>()
</span></td></tr><tr><td>9</td><td><span>		</span><span style="color:#b48ead;">for </span><span style="color:#bf616a;">_</span><span>, </span><span style="color:#bf616a;">win </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">ipairs</span><span>(</span><span style="color:#bf616a;">vim</span><span>.api.</span><span style="color:#bf616a;">nvim_list_wins</span><span>()) </span><span style="color:#b48ead;">do
</span></td></tr><tr><td>10</td><td><span>			</span><span style="color:#b48ead;">local </span><span style="color:#bf616a;">width </span><span>= </span><span style="color:#bf616a;">vim</span><span>.api.</span><span style="color:#bf616a;">nvim_win_get_width</span><span>(</span><span style="color:#bf616a;">win</span><span>)
</span></td></tr><tr><td>11</td><td><span>			</span><span style="color:#b48ead;">if </span><span style="color:#bf616a;">width </span><span>&lt; </span><span style="color:#bf616a;">window_size_threshold </span><span style="color:#b48ead;">then
</span></td></tr><tr><td>12</td><td><span>				</span><span style="color:#bf616a;">set_numbers</span><span>(</span><span style="color:#d08770;">false</span><span>, </span><span style="color:#bf616a;">win</span><span>)
</span></td></tr><tr><td>13</td><td><span>			</span><span style="color:#b48ead;">else
</span></td></tr><tr><td>14</td><td><span>				</span><span style="color:#bf616a;">set_numbers</span><span>(</span><span style="color:#d08770;">true</span><span>, </span><span style="color:#bf616a;">win</span><span>)
</span></td></tr><tr><td>15</td><td><span>			</span><span style="color:#b48ead;">end
</span></td></tr><tr><td>16</td><td><span>		</span><span style="color:#b48ead;">end
</span></td></tr><tr><td>17</td><td><span>	</span><span style="color:#b48ead;">end</span><span>,
</span></td></tr><tr><td>18</td><td><span>})
</span></td></tr></tbody></table></code></pre>
<p><a href="https://github.com/brennenputh/dotfiles/blob/cf2246d3eea2f0b1a14ca31be448d00a74fe16ae/nvim/lua/autocmds.lua#L67-L86">See it in context!</a></p>
<h2 id="bring-window-into-focus">Bring Window Into Focus</h2>
<pre data-linenos data-lang="lua" style="background-color:#2b303b;color:#c0c5ce;" class="language-lua "><code class="language-lua" data-lang="lua"><table><tbody><tr><td>1</td><td><span style="color:#b48ead;">local </span><span style="color:#8fa1b3;">win_focus </span><span>= </span><span style="color:#b48ead;">function</span><span>()
</span></td></tr><tr><td>2</td><td><span>    </span><span style="color:#65737e;">-- Uncomment if you use either of these plugins
</span></td></tr><tr><td>3</td><td><span>	</span><span style="color:#65737e;">-- require(&quot;dapui&quot;).close()
</span></td></tr><tr><td>4</td><td><span>	</span><span style="color:#65737e;">-- require(&quot;nvim-tree.api&quot;).tree.close()
</span></td></tr><tr><td>5</td><td><span>
</span></td></tr><tr><td>6</td><td><span>	</span><span style="color:#b48ead;">local </span><span style="color:#bf616a;">current_win </span><span>= </span><span style="color:#bf616a;">vim</span><span>.api.</span><span style="color:#bf616a;">nvim_get_current_win</span><span>()
</span></td></tr><tr><td>7</td><td><span>	</span><span style="color:#b48ead;">local </span><span style="color:#bf616a;">windows </span><span>= </span><span style="color:#bf616a;">vim</span><span>.api.</span><span style="color:#bf616a;">nvim_list_wins</span><span>()
</span></td></tr><tr><td>8</td><td><span>	</span><span style="color:#bf616a;">vim</span><span>.api.</span><span style="color:#bf616a;">nvim_win_set_width</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">vim</span><span>.o.columns - (#</span><span style="color:#bf616a;">windows </span><span>* </span><span style="color:#d08770;">20</span><span>))
</span></td></tr><tr><td>9</td><td><span>	</span><span style="color:#b48ead;">for </span><span style="color:#bf616a;">_</span><span>, </span><span style="color:#bf616a;">win </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">ipairs</span><span>(</span><span style="color:#bf616a;">windows</span><span>) </span><span style="color:#b48ead;">do
</span></td></tr><tr><td>10</td><td><span>		</span><span style="color:#b48ead;">if </span><span style="color:#bf616a;">win </span><span>~= </span><span style="color:#bf616a;">current_win </span><span style="color:#b48ead;">then
</span></td></tr><tr><td>11</td><td><span>			</span><span style="color:#bf616a;">vim</span><span>.api.</span><span style="color:#bf616a;">nvim_win_set_width</span><span>(</span><span style="color:#bf616a;">win</span><span>, </span><span style="color:#d08770;">20</span><span>)
</span></td></tr><tr><td>12</td><td><span>		</span><span style="color:#b48ead;">end
</span></td></tr><tr><td>13</td><td><span>	</span><span style="color:#b48ead;">end
</span></td></tr><tr><td>14</td><td><span style="color:#b48ead;">end
</span></td></tr><tr><td>15</td><td><span>
</span></td></tr><tr><td>16</td><td><span style="color:#bf616a;">keymap</span><span>(&quot;</span><span style="color:#a3be8c;">n</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;leader&gt;rs</span><span>&quot;, </span><span style="color:#b48ead;">function</span><span>()
</span></td></tr><tr><td>17</td><td><span>	</span><span style="color:#bf616a;">vim</span><span>.api.</span><span style="color:#bf616a;">nvim_win_set_width</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">20</span><span>)
</span></td></tr><tr><td>18</td><td><span style="color:#b48ead;">end</span><span>)
</span></td></tr><tr><td>19</td><td><span style="color:#bf616a;">keymap</span><span>(&quot;</span><span style="color:#a3be8c;">n</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;leader&gt;rf</span><span>&quot;, </span><span style="color:#bf616a;">win_focus</span><span>)
</span></td></tr></tbody></table></code></pre>
<p><a href="https://github.com/brennenputh/dotfiles/blob/cf2246d3eea2f0b1a14ca31be448d00a74fe16ae/nvim/lua/keymaps.lua#L50-L73">See it in context!</a></p>
<h2 id="resizing-mappings">Resizing Mappings</h2>
<p>This requires the <a href="https://github.com/pogyomo/winresize.nvim">winresize.nvim</a> plugin.</p>
<pre data-linenos data-lang="lua" style="background-color:#2b303b;color:#c0c5ce;" class="language-lua "><code class="language-lua" data-lang="lua"><table><tbody><tr><td>1</td><td><span style="color:#b48ead;">local </span><span style="color:#8fa1b3;">win_resize </span><span>= </span><span style="color:#b48ead;">function</span><span>(win, amt, dir)
</span></td></tr><tr><td>2</td><td><span>	</span><span style="color:#b48ead;">return function</span><span>()
</span></td></tr><tr><td>3</td><td><span>		</span><span style="color:#96b5b4;">require</span><span>(&quot;</span><span style="color:#a3be8c;">winresize</span><span>&quot;).</span><span style="color:#bf616a;">resize</span><span>(</span><span style="color:#bf616a;">win</span><span>, </span><span style="color:#bf616a;">amt</span><span>, </span><span style="color:#bf616a;">dir</span><span>)
</span></td></tr><tr><td>4</td><td><span>	</span><span style="color:#b48ead;">end
</span></td></tr><tr><td>5</td><td><span style="color:#b48ead;">end
</span></td></tr><tr><td>6</td><td><span>
</span></td></tr><tr><td>7</td><td><span style="color:#bf616a;">wk_add</span><span>(&quot;</span><span style="color:#a3be8c;">&lt;leader&gt;r</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Window Resize</span><span>&quot;)
</span></td></tr><tr><td>8</td><td><span style="color:#bf616a;">keymap</span><span>(&quot;</span><span style="color:#a3be8c;">n</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;leader&gt;rh</span><span>&quot;, </span><span style="color:#bf616a;">win_resize</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">10</span><span>, &quot;</span><span style="color:#a3be8c;">left</span><span>&quot;))
</span></td></tr><tr><td>9</td><td><span style="color:#bf616a;">keymap</span><span>(&quot;</span><span style="color:#a3be8c;">n</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;leader&gt;rj</span><span>&quot;, </span><span style="color:#bf616a;">win_resize</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">3</span><span>, &quot;</span><span style="color:#a3be8c;">down</span><span>&quot;))
</span></td></tr><tr><td>10</td><td><span style="color:#bf616a;">keymap</span><span>(&quot;</span><span style="color:#a3be8c;">n</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;leader&gt;rk</span><span>&quot;, </span><span style="color:#bf616a;">win_resize</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">3</span><span>, &quot;</span><span style="color:#a3be8c;">up</span><span>&quot;))
</span></td></tr><tr><td>11</td><td><span style="color:#bf616a;">keymap</span><span>(&quot;</span><span style="color:#a3be8c;">n</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;leader&gt;rl</span><span>&quot;, </span><span style="color:#bf616a;">win_resize</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">10</span><span>, &quot;</span><span style="color:#a3be8c;">right</span><span>&quot;))
</span></td></tr><tr><td>12</td><td><span style="color:#bf616a;">keymap</span><span>(&quot;</span><span style="color:#a3be8c;">n</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;leader&gt;r=</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;C-w&gt;=</span><span>&quot;, { </span><span style="color:#a3be8c;">desc </span><span>= &quot;</span><span style="color:#a3be8c;">Equalize Windows</span><span>&quot; })
</span></td></tr></tbody></table></code></pre>
<p><a href="https://github.com/brennenputh/dotfiles/blob/cf2246d3eea2f0b1a14ca31be448d00a74fe16ae/nvim/lua/keymaps.lua#L43-L68">See it in context!</a></p>

</div>
    </main>
  </body>
</html>
